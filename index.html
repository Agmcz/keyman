<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Keyman/LMLayer demo</title>
</head>
<body>
    <p id="offline-warning">
        Run a server to get this working:
        <code>python -m SimpleHTTPServer 8000</code>
    </p>
    <!-- Remove the warning message when accessed over an http: protocol. -->
    <script>
        if (location.protocol.match(/^https?/)) {
            document.querySelector('#offline-warning').remove();
        }
    </script>

    <h1> LMLayer Demo </h1>
    <script>
        // HACK! index.js will require this.
        var exports = {};
    </script>
    <script src="index.js"></script>
    <script>
        lm = new LMLayer;
        lm.initialize({ model: './models/en-x-test-teapot.js' })
            .then(conf => console.log('Initialized! Config:', conf));
    </script>

    <form>
        <ol id="suggestions">
        </ol>

        <textarea id="input"></textarea>
        <output id="buffer"></output>
    </form>

    <script>
        var input = document.querySelector('#input');
        var output = document.querySelector('#buffer');
        var suggestions = document.querySelector('#suggestions');

        input.addEventListener('input', function (event) {
            // event.data gives insertion
            // inputType: insertText
            // inputType: deleteContentBackward
            debugger;
            lm.predict({
                context: {},
                transform: {},
                layer: {},
            }).then(function (suggestions) {
                debugger;
            });
        });
    </script>

</body>
</html>
